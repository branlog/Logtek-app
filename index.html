<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logtek 2.1 ‚Äî Stable</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script defer src="config.js"></script>
  <script defer src="app.js"></script>
</head>
<body>
<header class="top">
  <div class="brand">LOGTEK</div>
  <nav>
    <a href="#" data-view="catalog">Catalogue</a>
    <a href="#" data-view="cart">Panier</a>
    <a href="#" data-view="checkout">Commander</a>
    <a href="#" data-view="account">Compte</a>
  </nav>
  <div class="right">
    <button id="loginBtn">Se connecter</button>
    <button id="logoutBtn" style="display:none">Quitter</button>
  </div>
</header>

<main id="catalog" class="view active">
  <h2>Catalogue</h2>
  <div id="catalogList" class="grid"></div>
</main>

<main id="cart" class="view">
  <h2>Votre panier</h2>
  <div id="cartList"></div>
  <div id="totals"></div>
  <div class="actions">
    <button id="toCheckout">Passer √† la commande</button>
  </div>
</main>

<main id="checkout" class="view">
  <h2>Commande</h2>
  <form id="checkoutForm" class="card">
    <label>Nom <input name="name" required></label>
    <label>T√©l√©phone <input name="phone" required></label>
    <label>Adresse <input name="address" required></label>

    <h3>Machine</h3>
    <div class="row">
      <select id="brand"></select>
      <select id="model"></select>
      <select id="year"></select>
    </div>
    <label>Autre (si non list√©e) <input name="machineCustom" placeholder="Marque / Mod√®le / Ann√©e"></label>

    <h3>Point GPS (optionnel)</h3>
    <div id="map" style="height:260px;border:1px solid #333;border-radius:10px"></div>
    <div class="row">
      <button type="button" id="useMyLocation">üìç Ma position</button>
      <span id="gpsLabel" class="muted">‚Äî</span>
    </div>
    <input type="hidden" id="lat" name="lat">
    <input type="hidden" id="lng" name="lng">

    <div class="actions">
      <button class="primary">Confirmer</button>
    </div>
  </form>
</main>

<main id="account" class="view">
  <h2>Mon compte</h2>
  <div id="accountInfo" class="card"></div>
  <h3>Mes commandes</h3>
  <div id="orders" class="grid"></div>
</main>

<main id="auth" class="view">
  <div class="auth card">
    <h2>Connexion</h2>
    <form id="signin">
      <label>Email <input type="email" name="email" required></label>
      <label>Mot de passe <input type="password" name="password" required></label>
      <button class="primary">Entrer</button>
    </form>
    <hr>
    <h3>Cr√©er un compte</h3>
    <form id="signup">
      <label>Email <input type="email" name="email" required></label>
      <label>Mot de passe <input type="password" name="password" required></label>
      <button>Cr√©er</button>
    </form>
  </div>
</main>

<footer class="foot">¬© Logtek</footer>

<script>
if ('serviceWorker' in navigator) { window.addEventListener('load', () => navigator.serviceWorker.register('service-worker.js')); }
</script>
</body>
</html>
